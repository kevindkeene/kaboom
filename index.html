<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kaboom! - The Arcade</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;800&display=swap');
        
        body { font-family: 'Inter', sans-serif; background-color: #111827; color: #f9fafb; margin: 0; }
        
        #game-area {
            position: relative;
            width: 100%;
            max-width: 400px;
            height: 600px;
            background-size: cover;
            background-repeat: no-repeat;
            border: none; 
            overflow: hidden;
            margin: auto;
            touch-action: none; 
            cursor: crosshair;
        }

        #game-area.hide-pointer { cursor: none !important; }

        .pixel-art {
            image-rendering: pixelated;
            image-rendering: crisp-edges;
        }

        .mad-bomber-img {
            position: absolute;
            top: 0;
            left: 0;
            z-index: 100;
        }

        .bucket-stack {
            position: absolute;
            display: flex;
            flex-direction: column-reverse; 
            align-items: center;
            justify-content: flex-start;
            z-index: 90;
            transition: top 0.2s ease-out;
        }

        .bucket-img { object-fit: contain; }

        .bomb-img { position: absolute; z-index: 50; transition: opacity 0.1s; }
        .splash-img { position: absolute; z-index: 250; pointer-events: none; }
        .explosion-img { position: absolute; z-index: 200; }

        .game-status-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(2px);
            z-index: 300;
            transition: opacity 0.3s;
        }
    </style>
    
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, setDoc, onSnapshot } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        
        // --- CONSTANTS ---
        const GAME_AREA_WIDTH = 400;
        const GAME_AREA_HEIGHT = 600;
        const INITIAL_BUCKET_COUNT = 3;
        const EXPLOSION_DELAY = 700; 
        const EXPLOSION_DURATION = 600; 
        const ANIMATION_DURATION_EFFECT = 300; 
        
        const THEMES = {
            'classic': {
                title: 'Classic Kaboom',
                description: 'The original bomb-catching challenge.',
                isStacked: true, 
                bomberDim: { w: 21, h: 50 }, 
                bombDim: { w: 15, h: 28 },
                bucketDim: { w: 50, h: 20, gap: 2 },
                splashDim: { w: 33, h: 46 },
                explosionDim: { w: 80, h: 64 }, // Standard explosion size
                hitbox: { xOffset: 0, catchW: 50, yOffset: 0, catchH: 20 }, 
                graphics: {
                    BOMBER: 'https://kevindkeene.github.io/kaboom/assets/bomber336x800.gif',
                    BOMB: 'https://kevindkeene.github.io/kaboom/assets/bomb240x448.gif',
                    BUCKET: 'https://kevindkeene.github.io/kaboom/assets/bucket.gif', 
                    EXPLOSION: 'https://kevindkeene.github.io/kaboom/assets/explosion320x256.gif',
                    SPLASH: 'https://kevindkeene.github.io/kaboom/assets/splash264x368.gif',
                    BACKGROUND: 'https://kevindkeene.github.io/kaboom/assets/kaboom-background.gif'
                },
                settings: {
                    EASY: { baseBombSpeed: 2.0, initialDropInterval: 120, initialBomberSpeed: 1.0 },
                    MEDIUM: { baseBombSpeed: 2.5, initialDropInterval: 100, initialBomberSpeed: 1.5 },
                    HARD: { baseBombSpeed: 3.2, initialDropInterval: 70, initialBomberSpeed: 2.0 }
                }
            },
            'alien-drop': {
                title: 'Alien Cow Drop',
                description: 'Catch falling cows on your tractor trailer hay bales!',
                isStacked: false, 
                bomberDim: { w: 50, h: 50 }, 
                bombDim: { w: 32, h: 26 }, 
                bucketDim: { w: 220, h: 80, gap: 0 }, 
                splashDim: { w: 80, h: 80 },
                explosionDim: { w: 80, h: 80 }, // Adjusted for the "Splat" graphic
                hitboxByLife: [
                    { xOffset: 115, catchW: 100, yOffset: 38, catchH: 18 }, 
                    { xOffset: 115, catchW: 100, yOffset: 19, catchH: 37 }, 
                    { xOffset: 115, catchW: 100, yOffset: 0,  catchH: 56 }  
                ],
                graphics: {
                    BOMBER: 'https://kevindkeene.github.io/kaboom/assets/ufo2-400x400.gif', 
                    BOMB: 'https://kevindkeene.github.io/kaboom/assets/cow3.gif', 
                    BUCKET_LAYERS: [
                        'https://kevindkeene.github.io/kaboom/assets/tractor-0hay.gif',
                        'https://kevindkeene.github.io/kaboom/assets/tractor-1hay.gif',
                        'https://kevindkeene.github.io/kaboom/assets/tractor-2hay.gif',
                        'https://kevindkeene.github.io/kaboom/assets/tractor-3hay.gif'
                    ],
                    EXPLOSION: 'https://kevindkeene.github.io/kaboom/assets/splat.gif', // UPDATED TO SPLAT
                    SPLASH: 'https://kevindkeene.github.io/kaboom/assets/burst.gif',
                    BACKGROUND: 'https://kevindkeene.github.io/kaboom/assets/alien_background2.gif'
                },
                settings: {
                    EASY: { baseBombSpeed: 2.5, initialDropInterval: 100, initialBomberSpeed: 1.5 },
                    MEDIUM: { baseBombSpeed: 3.0, initialDropInterval: 80, initialBomberSpeed: 2.0 },
                    HARD: { baseBombSpeed: 3.8, initialDropInterval: 60, initialBomberSpeed: 2.5 }
                }
            }
        };

        // --- GAME STATE ---
        let score = 0, lives = INITIAL_BUCKET_COUNT, highscore = 0, level = 1;
        let isGameOver = true, isGamePaused = true, frame = 0;
        let bombs = [], bucketElements = [];
        let currentThemeId = 'classic', currentDifficulty = 'MEDIUM';
        let bucketX = 0, madBomberX = 0, madBomberDirection = 1;
        let speedMultiplier = 1, madBomberSpeed = 1.5;
        let bombsDroppedInLevel = 0, totalBombsToDropInLevel = 15;
        let isTransitioningLevel = false;
        
        let db, auth, userId, highscoreRef, animationFrameHandle;

        function getCurrentHitbox() {
            const theme = THEMES[currentThemeId];
            if (theme.isStacked) return theme.hitbox;
            return theme.hitboxByLife[Math.max(0, lives - 1)];
        }

        async function initFirebase() {
            const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
            const config = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {};
            if (!config.apiKey) return;
            const app = initializeApp(config);
            db = getFirestore(app);
            auth = getAuth(app);
            onAuthStateChanged(auth, async (u) => {
                if (u) {
                    userId = u.uid;
                    highscoreRef = doc(db, `/artifacts/${appId}/users/${userId}/highscores`, 'kaboom-score');
                    onSnapshot(highscoreRef, (d) => { if (d.exists()) highscore = d.data().score; updateScoreDisplay(); });
                } else {
                    const t = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;
                    if (t) await signInWithCustomToken(auth, t); else await signInAnonymously(auth);
                }
            });
        }

        function startGame(themeId, diff) {
            isGameOver = false; isGamePaused = false;
            currentThemeId = themeId; currentDifficulty = diff;
            const theme = THEMES[themeId];
            const settings = theme.settings[diff];
            
            if (animationFrameHandle) cancelAnimationFrame(animationFrameHandle);
            
            score = 0; lives = INITIAL_BUCKET_COUNT; frame = 0; speedMultiplier = 1; level = 1;
            bombsDroppedInLevel = 0;
            totalBombsToDropInLevel = 15;
            isTransitioningLevel = false;

            madBomberX = 0; madBomberSpeed = settings.initialBomberSpeed;
            bombs.forEach(b => b.element.remove()); bombs = [];

            document.getElementById('overlay').classList.add('hidden');
            document.getElementById('mad-bomber-img').style.display = 'block';
            document.getElementById('title-display').textContent = theme.title;
            document.getElementById('game-area').classList.add('hide-pointer');
            document.getElementById('pause-toggle-button').classList.remove('opacity-0', 'pointer-events-none');

            initGameElements();
            updateScoreDisplay();
            gameLoop();
        }

        function startNextLevel() {
            level++;
            isTransitioningLevel = false;
            bombsDroppedInLevel = 0;
            totalBombsToDropInLevel = 15 + (level * 5); 
            speedMultiplier += 0.15;
            
            showTemporaryMessage(`LEVEL ${level}`, "text-yellow-400");
            updateScoreDisplay();
            isGamePaused = false;
            gameLoop();
        }

        function initGameElements() {
            const theme = THEMES[currentThemeId];
            const stack = document.getElementById('buckets-stack');
            const bomberEl = document.getElementById('mad-bomber-img');
            document.getElementById('game-area').style.backgroundImage = `url('${theme.graphics.BACKGROUND}')`;

            stack.innerHTML = ''; bucketElements = [];
            stack.style.width = `${theme.bucketDim.w}px`;
            
            if (theme.isStacked) {
                for (let i = 0; i < INITIAL_BUCKET_COUNT; i++) {
                    const b = document.createElement('img');
                    b.src = theme.graphics.BUCKET;
                    b.className = 'bucket-img pixel-art';
                    b.style.width = `${theme.bucketDim.w}px`;
                    b.style.height = `${theme.bucketDim.h}px`;
                    stack.appendChild(b);
                    bucketElements.push(b);
                }
            } else {
                const b = document.createElement('img');
                b.id = 'single-catcher-img';
                b.className = 'bucket-img pixel-art';
                b.style.width = `${theme.bucketDim.w}px`;
                b.style.height = `${theme.bucketDim.h}px`;
                stack.appendChild(b);
                bucketElements.push(b);
            }

            bomberEl.src = theme.graphics.BOMBER;
            bomberEl.className = 'mad-bomber-img pixel-art';
            bomberEl.style.width = `${theme.bomberDim.w}px`;
            bomberEl.style.height = `${theme.bomberDim.h}px`;
        }

        function gameLoop() {
            if (isGameOver || isGamePaused) return;
            frame++;
            updateBomber();
            updateBombs();
            document.getElementById('score-display').textContent = score;
            animationFrameHandle = requestAnimationFrame(gameLoop);
        }

        function updateBomber() {
            const theme = THEMES[currentThemeId];
            madBomberX += madBomberDirection * (madBomberSpeed * speedMultiplier);
            if (madBomberX > (GAME_AREA_WIDTH - theme.bomberDim.w)) { madBomberDirection = -1; madBomberX = GAME_AREA_WIDTH - theme.bomberDim.w; }
            else if (madBomberX < 0) { madBomberDirection = 1; madBomberX = 0; }
            document.getElementById('mad-bomber-img').style.left = `${madBomberX}px`;

            const settings = theme.settings[currentDifficulty];
            madBomberSpeed = Math.min(settings.initialBomberSpeed + (Math.floor(score / 30) * 0.1), 8);

            if (bombsDroppedInLevel < totalBombsToDropInLevel) {
                const dropInt = Math.max(8, settings.initialDropInterval - (level * 5) - Math.floor(score / 15));
                if (frame % Math.floor(dropInt) === 0) {
                    const x = madBomberX + (theme.bomberDim.w / 2) - (theme.bombDim.w / 2);
                    createBomb(x, theme.bomberDim.h);
                    bombsDroppedInLevel++;
                }
            }
        }

        function createBomb(x, y) {
            const theme = THEMES[currentThemeId];
            const el = document.createElement('img');
            el.src = theme.graphics.BOMB;
            el.className = 'bomb-img pixel-art';
            el.style.width = `${theme.bombDim.w}px`;
            el.style.height = `${theme.bombDim.h}px`;
            el.style.left = `${x}px`; el.style.top = `${y}px`;
            document.getElementById('game-area').appendChild(el);
            bombs.push({ x, y, el, speed: (theme.settings[currentDifficulty].baseBombSpeed + (level * 0.1)) * speedMultiplier });
        }

        function updateBombs() {
            const theme = THEMES[currentThemeId];
            const hitbox = getCurrentHitbox();
            let catchTopY;
            if (theme.isStacked) {
                catchTopY = GAME_AREA_HEIGHT - (lives * (theme.bucketDim.h + theme.bucketDim.gap));
            } else {
                catchTopY = GAME_AREA_HEIGHT - theme.bucketDim.h + hitbox.yOffset;
            }

            for (let i = bombs.length - 1; i >= 0; i--) {
                const b = bombs[i];
                b.y += b.speed;
                b.el.style.top = `${b.y}px`;

                if (b.y + theme.bombDim.h > GAME_AREA_HEIGHT) {
                    handleMiss(i, b);
                } else if (lives > 0) {
                    const cXStart = bucketX + hitbox.xOffset;
                    const cXEnd = cXStart + hitbox.catchW;
                    const midX = b.x + (theme.bombDim.w / 2);
                    const catchBottomY = catchTopY + hitbox.catchH;

                    if (b.y + theme.bombDim.h > catchTopY && b.y < catchBottomY && midX > cXStart && midX < cXEnd) {
                        handleCatch(i, b, catchTopY);
                    }
                }
            }

            if (!isGameOver && bombsDroppedInLevel >= totalBombsToDropInLevel && bombs.length === 0 && !isTransitioningLevel) {
                isTransitioningLevel = true;
                isGamePaused = true;
                showTemporaryMessage("LEVEL COMPLETE!", "text-green-400");
                setTimeout(startNextLevel, 2000);
            }
        }

        function handleCatch(idx, b, topY) {
            score++;
            const theme = THEMES[currentThemeId];
            const impactX = b.x + (theme.bombDim.w / 2) - (theme.splashDim.w / 2);
            createSplash(impactX, topY - theme.splashDim.h);
            
            b.el.remove(); bombs.splice(idx, 1);
            if (score > 0 && score % 1000 === 0 && lives < INITIAL_BUCKET_COUNT) {
                lives++; showTemporaryMessage("Extra Layer!", "text-green-400"); updateScoreDisplay();
            }
        }

        function handleMiss(idx, b) {
            lives--; isGamePaused = true;
            const theme = THEMES[currentThemeId];
            if (lives > 0) speedMultiplier = Math.max(1.0, speedMultiplier - 0.15);
            
            // Miss effect centered horizontally on bomb
            createExplosion(b.x + (theme.bombDim.w / 2), b.y + theme.bombDim.h);
            
            b.el.remove(); bombs.splice(idx, 1);
            updateScoreDisplay();
            showTemporaryMessage("OOPS!", "text-red-500");
            setTimeout(() => {
                detonateRemaining(lives <= 0);
            }, EXPLOSION_DURATION);
        }

        function detonateRemaining(isLast) {
            const toEx = [...bombs]; bombs = [];
            if (toEx.length === 0) { setTimeout(() => { if (isLast) endGame(); else resume(); }, EXPLOSION_DURATION); return; }
            toEx.sort((a, b) => b.y - a.y);
            toEx.forEach((b, i) => {
                setTimeout(() => {
                    const theme = THEMES[currentThemeId];
                    createExplosion(b.x + (theme.bombDim.w / 2), b.y + theme.bombDim.h);
                    b.el.remove();
                }, EXPLOSION_DURATION + (i * EXPLOSION_DELAY));
            });
            setTimeout(() => { if (isLast) endGame(); else resume(); }, EXPLOSION_DURATION + (toEx.length * EXPLOSION_DELAY) + EXPLOSION_DURATION);
        }

        function resume() { 
            if (isTransitioningLevel) return;
            showTemporaryMessage("", ""); isGamePaused = false; updatePauseButton(); gameLoop(); 
        }

        function endGame() {
            isGameOver = true; isGamePaused = true;
            if (animationFrameHandle) cancelAnimationFrame(animationFrameHandle);
            if (score > highscore && highscoreRef) setDoc(highscoreRef, { score, timestamp: new Date() }, { merge: true });
            document.getElementById('game-area').classList.remove('hide-pointer');
            document.getElementById('pause-toggle-button').classList.add('opacity-0', 'pointer-events-none');
            showThemeSelection(true);
        }

        function createExplosion(x, y) {
            const theme = THEMES[currentThemeId];
            const el = document.createElement('img');
            el.src = theme.graphics.EXPLOSION;
            el.className = 'explosion-img pixel-art';
            el.style.width = `${theme.explosionDim.w}px`;
            el.style.height = `${theme.explosionDim.h}px`;
            el.style.left = `${x - theme.explosionDim.w / 2}px`; 
            el.style.top = `${y - theme.explosionDim.h}px`;
            document.getElementById('game-area').appendChild(el);
            setTimeout(() => el.remove(), EXPLOSION_DURATION);
        }

        function createSplash(x, y) {
            const theme = THEMES[currentThemeId];
            const el = document.createElement('img');
            el.src = theme.graphics.SPLASH;
            el.className = 'splash-img pixel-art';
            el.style.width = `${theme.splashDim.w}px`; el.style.height = `${theme.splashDim.h}px`;
            el.style.left = `${x}px`; el.style.top = `${y}px`;
            document.getElementById('game-area').appendChild(el);
            setTimeout(() => el.remove(), ANIMATION_DURATION_EFFECT);
        }

        function updateScoreDisplay() {
            document.getElementById('score-display').textContent = score;
            document.getElementById('highscore-display').textContent = highscore;
            document.getElementById('level-display').textContent = level;
            
            const theme = THEMES[currentThemeId];
            const stack = document.getElementById('buckets-stack');

            if (theme.isStacked) {
                const unitH = theme.bucketDim.h + theme.bucketDim.gap;
                const h = lives * unitH;
                stack.style.height = `${h}px`;
                stack.style.top = `${GAME_AREA_HEIGHT - h}px`;
                bucketElements.forEach((el, idx) => el.style.display = idx < lives ? 'block' : 'none');
            } else {
                const h = theme.bucketDim.h;
                stack.style.height = `${h}px`;
                stack.style.top = `${GAME_AREA_HEIGHT - h}px`;
                const img = document.getElementById('single-catcher-img');
                if (img) img.src = theme.graphics.BUCKET_LAYERS[lives];
            }
        }

        function showThemeSelection(isOver = false) {
            const overlay = document.getElementById('overlay');
            const msg = document.getElementById('status-message');
            const btns = document.getElementById('difficulty-buttons');
            overlay.classList.remove('hidden'); overlay.style.opacity = 1;
            btns.innerHTML = '';
            if (isOver) msg.innerHTML = `<p class="text-4xl font-extrabold text-red-500 mb-4 uppercase">GAME OVER</p><p class="text-xl mb-2">Final Score: ${score}</p><p class="text-lg mb-8">Reached Level: ${level}</p>`;
            else msg.innerHTML = `<p class="text-5xl font-extrabold text-yellow-400 mb-4 uppercase">KABOOM!</p><p class="text-xl mb-8">Pick a Version:</p>`;
            
            Object.keys(THEMES).forEach(id => {
                const b = document.createElement('button');
                b.textContent = THEMES[id].title;
                b.className = 'bg-indigo-600 text-white font-bold py-4 px-8 rounded-lg m-2 uppercase hover:scale-105 transition w-64 shadow-lg';
                b.onclick = () => showDifficultySelection(id);
                btns.appendChild(b);
            });
        }

        function showDifficultySelection(themeId) {
            const btns = document.getElementById('difficulty-buttons');
            const theme = THEMES[themeId];
            document.getElementById('status-message').innerHTML = `<p class="text-3xl font-bold text-yellow-400 mb-2 uppercase">${theme.title}</p><p class="text-gray-400 mb-8">${theme.description}</p>`;
            btns.innerHTML = '';
            ['EASY', 'MEDIUM', 'HARD'].forEach(l => {
                const b = document.createElement('button');
                b.textContent = l;
                const colors = { EASY: 'bg-green-600', MEDIUM: 'bg-yellow-600', HARD: 'bg-red-600' };
                b.className = `${colors[l]} text-white font-bold py-3 px-8 rounded-full m-2 uppercase hover:scale-105 transition shadow-md`;
                b.onclick = () => startGame(themeId, l);
                btns.appendChild(b);
            });
            const back = document.createElement('button');
            back.textContent = 'Back'; back.className = 'bg-gray-700 text-white font-bold py-2 px-4 rounded-full mt-4 block mx-auto text-sm';
            back.onclick = () => showThemeSelection();
            btns.appendChild(back);
        }

        function handleInput(e) {
            if (isGameOver || isGamePaused) return;
            const clientX = e.touches ? e.touches[0].clientX : e.clientX;
            const rect = document.getElementById('game-area').getBoundingClientRect();
            const hitbox = getCurrentHitbox();
            
            const minX = 0 - hitbox.xOffset;
            const maxX = GAME_AREA_WIDTH - (hitbox.xOffset + hitbox.catchW);
            const imageLeft = (clientX - rect.left) - (hitbox.xOffset + hitbox.catchW / 2);

            bucketX = Math.max(minX, Math.min(imageLeft, maxX));
            document.getElementById('buckets-stack').style.left = `${bucketX}px`;
        }

        function updatePauseButton() {
            const play = document.getElementById('play-icon'), pause = document.getElementById('pause-icon');
            if (isGamePaused) { play.classList.remove('hidden'); pause.classList.add('hidden'); }
            else { play.classList.add('hidden'); pause.classList.remove('hidden'); }
        }

        function togglePause() {
            if (isGameOver || isTransitioningLevel) return;
            if (isGamePaused && document.getElementById('temp-message').textContent === "OOPS!") return;
            isGamePaused = !isGamePaused; updatePauseButton();
            if (isGamePaused) showTemporaryMessage("PAUSED", "text-blue-400");
            else { showTemporaryMessage("GO!", "text-green-400"); gameLoop(); }
        }

        function showTemporaryMessage(text, color) {
            const el = document.getElementById('temp-message');
            el.textContent = text;
            if (text === "") { el.style.opacity = 0; return; }
            el.className = `absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-3xl font-extrabold p-3 rounded-lg z-20 transition-opacity duration-300 ${color} shadow-2xl`;
            el.style.opacity = 1;
            
            if (text === "OOPS!" || text === "GO!" || text === "LEVEL COMPLETE!" || text.startsWith("LEVEL ")) {
                setTimeout(() => el.style.opacity = 0, 1500);
            }
        }

        window.onload = () => {
            initFirebase();
            showThemeSelection();
            const area = document.getElementById('game-area');
            area.addEventListener('mousemove', handleInput);
            area.addEventListener('touchstart', handleInput);
            area.addEventListener('touchmove', handleInput);
            document.getElementById('pause-toggle-button').onclick = togglePause;
        };
    </script>
</head>
<body class="p-4 flex flex-col items-center justify-center min-h-screen">
    <div class="text-center mb-6">
        <h1 id="title-display" class="text-5xl font-extrabold text-red-500 shadow-lg tracking-wider">KABOOM!</h1>
    </div>
    <div id="game-container" class="w-full flex flex-col items-center">
        <div class="w-full max-w-[400px] bg-gray-900 p-3 rounded-t-lg shadow-xl flex justify-between items-center text-lg font-mono border-t-2 border-x-2 border-yellow-500">
            <div class="flex flex-col">
                <span class="text-xs text-gray-500">SCORE</span>
                <span id="score-display" class="text-green-400">0</span>
            </div>
            <div class="flex flex-col items-center">
                <span class="text-xs text-gray-500">LEVEL</span>
                <span id="level-display" class="text-white">1</span>
            </div>
            <button id="pause-toggle-button" class="text-gray-400 hover:text-white transition duration-150 p-1 rounded-full border border-gray-700 opacity-0 pointer-events-none">
                <svg id="play-icon" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.26a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                <svg id="pause-icon" class="w-5 h-5 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 18a8 8 0 100-16 8 8 0 000 16zM15 9h-2M9 9h-2"></path></svg>
            </button>
            <div class="flex flex-col items-end">
                <span class="text-xs text-gray-500">HIGH</span>
                <span id="highscore-display" class="text-yellow-400">0</span>
            </div>
        </div>
        <div id="game-area" class="w-full h-[600px] max-w-[400px] rounded-b-lg relative">
            <img id="mad-bomber-img" class="mad-bomber-img" style="display: none;" alt="Bomber">
            <div id="buckets-stack" class="bucket-stack"></div>
            <div id="temp-message" class="transition-opacity duration-300 opacity-0 pointer-events-none"></div>
            <div id="overlay" class="game-status-overlay hidden">
                <div class="text-center p-6">
                    <div id="status-message" class="mb-8"></div>
                    <div id="difficulty-buttons" class="flex flex-wrap justify-center items-center"></div>
                </div>
            </div>
        </div>
    </div>
    <div class="mt-4 text-xs text-gray-500 text-center">
        <p>User ID: <span id="user-id-display">Connecting...</span></p>
    </div>
</body>
</html>

